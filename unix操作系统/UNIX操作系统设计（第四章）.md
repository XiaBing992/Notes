# UNIX操作系统设计（第四章）

## 第四章    文件的内部表示

### 索引节点

索引节点以静态的形式存在于磁盘上，内核将他们读进**内存索引节点表**中

### **超级块**

**超级块的组成：**

- 文件系统的规模
- 文件系统中空闲块的数目
- 文件系统中可用的空闲块表
- 空闲块表中下一空闲块的下标
- 索引节点表的大小
- 文件系统中空闲索引节点的数目
- 空闲索引节点表
- 下一空闲索引节点的下标
- 指出超级块已经被修改的标志

### 为新文件分配索引节点

最高序号的索引节点，称之为“铭记”的索引节点，超级块中的最后一个索引节点**（下一次搜索的起始点）**

**从‘‘铭记”索引节点开始搜索可以保证不浪费时间读那些已知不含空闲索引节点的磁盘块**

索引节点的分配：从超级块中的空闲索引节点表中索引节点号，若表为空，则从磁盘搜索空闲索引节点且从“铭记”索引节点开始

索引节点的释放：将文件系统中的索引节点总数加1，若索引节点表非空，则直接返回，否则将被释放的索引节点与铭记索引节点比较，若释放的索引节点号比铭记索引节点号小，则将铭记索引节点替换
